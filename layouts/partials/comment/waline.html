{{- if and (site.Params.Waline.ServerURL) (.Params.Aronica.comment | default true) (or hugo.IsProduction hugo.IsServer) -}}
<div id="waline" class="w-full max-w-prose not-prose"></div>
<script type="module">
  import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

  init({
    el: '#waline',
    search: false,
    serverURL: '{{ .Site.Params.Waline.ServerURL }}',
    lang: '{{- if eq .Language.LanguageCode "en" -}}en{{- else -}}zh-CN{{- end -}}',
    dark: 'html[data-theme="dark"]',
    requiredMeta: ["nick", "mail"],
    wordLimit: ["5", "1000"],
    imageUploader: false,
    noCopyright: true,
    emoji: ["//npm.onmicrosoft.cn/@waline/emojis@1.2.0/qq"],
  });
</script>
{{- end -}}
