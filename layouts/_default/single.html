{{- define "main" -}}
{{- /* note: the main start from 2, leave space for navbar */ -}}
<main class="flex flex-col md:items-center lg:items-start">
  {{- /* right sidebar */ -}}
  {{- if and (.IsPage) (.Params.Aronica.toc | default true ) -}}
  <nav class="sticky xl:fixed right-0 top-16 xl:block z-5 w-full xl:max-w-80 xl:h-[calc(100vh-4rem)] xl:overflow-y-auto bg-base-200 rounded-box">
    <details id="page-toc" class="menu w-full">
      <summary class="flex flex-row"><span class="hidden xl:block">本文目录</span>
        <span id="current-h2" class="xl:hidden">本文目录</span>
      </summary>
      <div>
        {{- .TableOfContents -}}
      </div>
    </details>
  </nav>
  {{- end -}}

  <article class="pt-10 px-4 md:px-8 prose prose-sm md:prose-base">
    <h1>{{- .Title -}}</h1>
    <div id="post-meta" class="flex flex-row justify-start items-center gap-8 mb-6">
      <div class="flex flex-row items-center gap-1">
        {{- partialCached "icons/calendar.html" . -}}
        {{- partial "time.html" (dict "Datetime" .Date) -}}
      </div>

      {{- if ne .Date .Lastmod -}}
      <div class="flex flex-row items-center gap-1">
        {{- partialCached "icons/edit.html" . -}}
        {{- partial "time.html" (dict "Datetime" .Lastmod) -}}
      </div>
      {{- end -}}

      {{- if .Translations -}}
      {{- range .Translations -}}
      <a href="{{ .RelPermalink }}" hreflang="{{ .Language.LanguageCode }}" class="flex flex-row items-center gap-1 link link-hover">
        {{- partial "icons/translate.html" -}}
        <span class="text-sm text-gray-400">{{ .LinkTitle }}</span>
      </a>
      {{- end -}}
      {{- end -}}
    </div>

    {{- .Content -}} {{- partial "terms.html" (dict "taxonomy" "tags" "page" .) -}}
  </article>

  {{- partial "body/section-prev-next.html" . -}}

  {{- partial "comment/waline.html" . -}}
</main>
{{- .Page.Store.Set "LeftSidebar" "ColumnTOC" -}}
{{- if eq .Page.RelPermalink "/about/" -}}
  {{- .Page.Store.Set "LeftSidebar" "SiteLink" -}}
{{- end -}}
{{- end -}}
